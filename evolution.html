<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ğŸ“Š Ã‰volution corporelle â€“ The Safe Place Universe</title>
  <link rel="stylesheet" href="style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <style>
    /* ğŸ€ Harmonisation du tableau */
    #progressTable {
      width: 100%;
      border-collapse: collapse;
      background: var(--blanc);
      border-radius: 20px;
      overflow: hidden;
      box-shadow: 0 3px 10px rgba(0,0,0,0.05);
      margin-top: 1.2rem;
    }

    #progressTable th {
      background-color: var(--pÃªche);
      color: var(--texte);
      font-weight: 600;
      padding: 0.8rem;
      text-align: center;
      font-size: 1rem;
    }

    #progressTable td {
      padding: 0.6rem;
      text-align: center;
      border-bottom: 1px solid #f3e7f5;
    }

    #progressTable tr:last-child td {
      border-bottom: none;
    }

    #progressTable input {
      width: 85%;
      padding: 0.4rem 0.6rem;
      border: 1px solid var(--lavande);
      border-radius: 10px;
      background: #fff9fb;
      text-align: center;
      font-family: 'Quicksand', sans-serif;
      transition: all 0.2s ease;
    }

    #progressTable input:focus {
      outline: none;
      border-color: var(--accent);
      background: #fff;
      box-shadow: 0 0 5px rgba(240,184,202,0.4);
    }

    /* ğŸŒ¸ Courbe centrÃ©e et harmonieuse */
    canvas {
      display: block;
      margin: 1.5rem auto;
      max-width: 600px;
    }

    .mantra {
      font-style: italic;
      text-align: center;
      color: var(--accent);
      margin-bottom: 1rem;
    }
  </style>
</head>

<body>
  <section class="splash">
    <h1>ğŸ“Š Ã‰volution corporelle</h1>
    <p class="subtitle">Suis ton Ã©volution en douceur, mois aprÃ¨s mois ğŸŒ·</p>
  </section>

  <main class="content">
    <div class="card">
      <h2>ğŸŒ¸ Suivi mensuel</h2>
      <p class="mantra">â€œChaque progrÃ¨s, mÃªme minime, est une victoire.â€ ğŸ’ª</p>

      <table id="progressTable">
        <thead>
          <tr>
            <th>Mois</th>
            <th>Poids (kg)</th>
            <th>Taille (cm)</th>
            <th>Hanche (cm)</th>
            <th>Bras (cm)</th>
            <th>Cuisse (cm)</th>
          </tr>
        </thead>
        <tbody>
          <tr><td>Janvier</td><td><input></td><td><input></td><td><input></td><td><input></td><td><input></td></tr>
          <tr><td>FÃ©vrier</td><td><input></td><td><input></td><td><input></td><td><input></td><td><input></td></tr>
          <tr><td>Mars</td><td><input></td><td><input></td><td><input></td><td><input></td><td><input></td></tr>
          <tr><td>Avril</td><td><input></td><td><input></td><td><input></td><td><input></td><td><input></td></tr>
          <tr><td>Mai</td><td><input></td><td><input></td><td><input></td><td><input></td><td><input></td></tr>
          <tr><td>Juin</td><td><input></td><td><input></td><td><input></td><td><input></td><td><input></td></tr>
          <tr><td>Juillet</td><td><input></td><td><input></td><td><input></td><td><input></td><td><input></td></tr>
          <tr><td>AoÃ»t</td><td><input></td><td><input></td><td><input></td><td><input></td><td><input></td></tr>
          <tr><td>Septembre</td><td><input></td><td><input></td><td><input></td><td><input></td><td><input></td></tr>
          <tr><td>Octobre</td><td><input></td><td><input></td><td><input></td><td><input></td><td><input></td></tr>
          <tr><td>Novembre</td><td><input></td><td><input></td><td><input></td><td><input></td><td><input></td></tr>
          <tr><td>DÃ©cembre</td><td><input></td><td><input></td><td><input></td><td><input></td><td><input></td></tr>
        </tbody>
      </table>
    </div>

    <div class="card">
      <h2>ğŸ“ˆ Courbe dâ€™Ã©volution du poids</h2>
      <canvas id="weightChart"></canvas>
    </div>

    <nav class="menu">
      <a href="index.html">ğŸ¡ Retour Ã  lâ€™accueil</a>
    </nav>
  </main>

  <script>
    const inputs = document.querySelectorAll("#progressTable input");
    const chartCtx = document.getElementById("weightChart");

    // Charger les donnÃ©es sauvegardÃ©es
    const savedData = JSON.parse(localStorage.getItem("bodyProgress")) || {};

    inputs.forEach((input, i) => {
      input.value = savedData[i] || "";
      input.addEventListener("input", () => {
        savedData[i] = input.value;
        localStorage.setItem("bodyProgress", JSON.stringify(savedData));
        updateChart();
      });
    });

    function updateChart() {
      const months = ["Jan", "FÃ©v", "Mar", "Avr", "Mai", "Juin", "Juil", "AoÃ»t", "Sep", "Oct", "Nov", "DÃ©c"];
      const weights = [];
      document.querySelectorAll("#progressTable tbody tr").forEach(row => {
        const weight = parseFloat(row.cells[1].querySelector("input").value);
        weights.push(isNaN(weight) ? null : weight);
      });

      if (window.weightChart) window.weightChart.destroy();

      window.weightChart = new Chart(chartCtx, {
        type: "line",
        data: {
          labels: months,
          datasets: [{
            label: "Poids (kg)",
            data: weights,
            fill: false,
            borderColor: "#f0b8ca",
            tension: 0.3,
            pointBackgroundColor: "#d16ba5"
          }]
        },
        options: {
          scales: {
            y: {
              beginAtZero: false,
              ticks: { color: "#514b52" },
              grid: { color: "#f5e6f0" }
            },
            x: {
              ticks: { color: "#514b52" },
              grid: { color: "transparent" }
            }
          },
          plugins: { legend: { display: false } }
        }
      });
    }

    updateChart();
  </script>
</body>
</html>
