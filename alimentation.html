<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>ğŸ± Alimentation â€“ The Safe Place Universe</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <section class="splash">
    <h1>ğŸ± Alimentation</h1>
    <p class="subtitle">Ton espace de nutrition douce et consciente ğŸŒ¿</p>
  </section>

  <div class="mantra">
    â€œJe nourris mon corps avec amour, douceur et Ã©quilibre.â€ ğŸ’«
  </div>

  <main class="content">

    <!-- ğŸ•’ Organisation alimentaire -->
    <div class="card schedule-card">
      <h2>ğŸ•’ Organisation alimentaire</h2>
      <p class="subtitle">AdaptÃ©e Ã  ton rythme de travail et ton jeÃ»ne intermittent ğŸŒ™</p>

      <table class="schedule-table">
        <thead>
          <tr>
            <th>Poste</th>
            <th>FenÃªtre alimentaire</th>
            <th>Brunch</th>
            <th>Collation</th>
            <th>DÃ®ner</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><strong>Matin (8hâ€“16h15)</strong></td>
            <td>12hâ€“19h</td>
            <td>12h00</td>
            <td>16h30</td>
            <td>18h30</td>
          </tr>
          <tr>
            <td><strong>AprÃ¨s-midi (16hâ€“00h15)</strong></td>
            <td>17h30â€“00h30</td>
            <td>17h30</td>
            <td>21h00</td>
            <td>23h30</td>
          </tr>
          <tr>
            <td><strong>Nuit (00hâ€“8h15)</strong></td>
            <td>15h30â€“22h30</td>
            <td>15h30</td>
            <td>19h00</td>
            <td>22h00</td>
          </tr>
        </tbody>
      </table>
    </div>

    <!-- ğŸŒ¸ Plan automatique de la semaine -->
    <div class="card">
      <h2>ğŸŒ¸ Ton plan alimentaire de la semaine</h2>
      <p class="subtitle">Mise Ã  jour automatique chaque lundi matin ğŸŒ™</p>
      <div id="weeklyPlan" class="week-grid"></div>
    </div>

    <!-- ğŸ’­ Ressenti -->
    <div class="card mood-card">
      <h2>ğŸ’­ Mon ressenti du jour</h2>
      <textarea id="foodMood" rows="3" placeholder="Comment te sens-tu aujourdâ€™hui ? ğŸ’¬"></textarea>
      <p id="moodMsg" class="fade-msg">âœ¨ Câ€™est notÃ© avec douceur ğŸŒ¸</p>
    </div>

    <!-- ğŸŒ¸ Navigation -->
    <nav class="menu">
      <a href="recettes.html">ğŸ§ Voir mes recettes</a>
      <a href="courses.html">ğŸ›’ Voir ma liste de courses</a>
      <a href="complements.html">ğŸŒ¿ ComplÃ©ments saisonniers</a>
      <a href="index.html">ğŸ¡ Retour Ã  lâ€™accueil</a>
    </nav>
  </main>

  <script>
    // ğŸŒ¸ Charge le menu gÃ©nÃ©rÃ© automatiquement (data/menu.json)
    fetch("data/menu.json")
      .then(r => r.json())
      .then(menu => {
        const planContainer = document.getElementById("weeklyPlan");
        planContainer.innerHTML = "";

        menu.forEach(day => {
          const card = document.createElement("div");
          card.className = "day-card";
          card.innerHTML = `
            <h3>ğŸŒ¸ ${day.jour}</h3>
            <p><strong>Repas :</strong> ${day.repas}</p>
            <p><strong>Collation :</strong> ${day.collation}</p>
          `;
          planContainer.appendChild(card);
        });
      })
      .catch(() => {
        document.getElementById("weeklyPlan").innerHTML =
          "<p>Impossible de charger ton plan alimentaire ğŸŒ§ï¸</p>";
      });

    // ğŸ’­ Sauvegarde du ressenti
    const mood = document.getElementById("foodMood");
    const msg = document.getElementById("moodMsg");

    if (localStorage.getItem("foodMood")) {
      mood.value = localStorage.getItem("foodMood");
    }

    mood.addEventListener("input", () => {
      localStorage.setItem("foodMood", mood.value);
      msg.style.display = "block";
      msg.style.opacity = "1";
      setTimeout(() => {
        msg.style.opacity = "0";
        setTimeout(() => (msg.style.display = "none"), 400);
      }, 1500);
    });
  </script>

  <!-- Script auto Lundi -->
  <script defer src="autoUpdate.js"></script>

  <!-- BanniÃ¨re -->
  <div id="autoBanner" class="auto-banner" style="display:none;">
    âœ¨ Ta nouvelle semaine a Ã©tÃ© gÃ©nÃ©rÃ©e automatiquement ğŸŒ¸
  </div>
</body>
</html>
